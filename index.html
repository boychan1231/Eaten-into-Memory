<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>時魔 2025 - 網頁版</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="game-wrapper">
        <header>
            
            <div class="tab-nav">
                <button class="tab-btn active" data-target="game-content">遊戲</button>
                <button class="tab-btn" data-target="rules-content">規則</button>
                <button class="tab-btn" data-target="settings-content">設定</button>
            </div>
            
            <div class="game-status">
                <span id="round-info">準備開始</span> | 
                <span id="turn-info">回合: --</span>
                <button id="start-game-btn" style="margin-left: 15px;">開始新遊戲</button>
            </div>
        </header>

        <div class="tab-wrapper">
            <div id="game-content" class="tab-content active-tab">
                
                <div class="main-area">
					  <!-- 左：日誌 -->
					<div class="log-section">
						<h3>📜 命運日誌</h3>
						<div id="game-log-container">
						  <ul id="log-list">
							<li>請點擊「開始新遊戲」，然後點擊「下一回合」來翻開小時卡。</li>
						  </ul>
						</div>
					</div>

					  <!-- 中：鐘面 -->
					<div class="clock-section">
						<div id="clock-face">
						  <div class="clock-center"></div>
						</div>
					</div>

					  <!-- 右：資訊面板群組 -->
					<div class="side-panel-group">

						<div id="deck-info" class="log-side-info no-click">
							<div class="deck-title">小時卡庫</div>
							<div class="deck-count" id="deck-count-num">--</div>
						</div>

						<div class="panel-switcher">
							<button id="btn-show-played" class="switch-btn active" type="button">本回合</button>
							<button id="btn-show-history" class="switch-btn" type="button">歷史記錄</button>
						</div>

						<div id="played-cards-panel" class="log-side-info">
							<div class="deck-title" style="color:#ffd27f;">本回合出牌</div>
							<div id="played-cards-list"></div>
						</div>

						<div id="player-history-panel" class="log-side-info" style="display:none;">
							<div class="deck-title" style="color:#ffd27f;">各角色出牌記錄</div>
							<div id="player-history-list"></div>
						</div>

					</div>
				</div>
				
				<div id="human-player-area" class="human-area">
					<div id="human-info">
						<h4 id="human-role-display">您是：--</h4>
						<div id="evolution-progress-area" class="progress-area"></div>
						<div class="human-stats-row">
							<!--<div>手牌: <span id="h-hand-count">0</span></div>-->
							<div>Mana: <span id="h-mana">0</span></div>
							<div>齒輪: <span id="h-gear">0</span></div>
							<div>骰子: <span id="h-dice">--</span></div>
							<div>分數: <span id="h-score">0</span></div>
							<div>位置: <span id="h-pos">--</span></div>
							<div>收集小時卡: <span id="h-hour">0</span></div>
						</div>
					</div>

					  <!-- 時針能力面板（保留） -->
					<div id="ability-panel" class="ability-panel" style="display:none;">
						<div class="ability-title">特殊能力（時針）</div>
						<div class="ability-actions">
							<button id="ability-peek-btn" type="button">查看小時卡庫頂牌</button>
							<button id="ability-bury-btn" type="button">2 Mana：頂牌放到底</button>
						</div>
						<div id="ability-peek-result" class="ability-result">頂牌：--</div>
						<div class="ability-hint">在「出分鐘卡前」使用；「頂牌放底」每回合一次。</div>
					</div>

					<!-- 分針能力二選一面板（保留） -->
					<div id="ability-choice-panel" style="display:none; margin-bottom: 10px;">
						<div id="ability-choice-text" class="instruction-text"></div>
						<div style="display:flex; gap:10px; justify-content:center; margin-top:8px;">
							<button id="ability-use-btn">使用特殊能力</button>
							<button id="ability-skip-btn">略過能力</button>
						</div>
					</div>

					<!-- 手牌 + 右側按鈕（新增這層 human-play-row） -->
					<div class="human-play-row">
						<div id="human-hand" class="hand-display"></div>
						<div id="human-controls" class="hand-controls">
							<div id="seconds-ability-controls" class="control-block" style="display:none;">
								<button id="seconds-ability-btn" type="button">秒針能力：蓋放 2 張（消耗 3 Mana）</button>
								<button id="seconds-ability-cancel-btn" type="button" style="display:none;">取消</button>
							<div id="seconds-ability-hint" class="instruction-text" style="display:none;">
							  請選擇 2 張分鐘卡，然後按「確認出牌」。
							</div>
							</div>

						  <button id="confirm-move-btn" disabled>確認出牌</button>
						  <button id="next-step-btn" disabled>下一回合</button>
						</div>
					</div>
				</div>

				<div id="players-section" class="players-grid">
					<div class="player-card placeholder">
						<p>等待遊戲開始...</p>
					</div>
				</div>
            </div>
        </div>
            
            <div id="rules-content" class="tab-content">
                <div class="rules-wrapper">
                    <h3>📖 遊戲規則總覽</h3>
                    <p class="rules-intro">
                        規則調整中，請以遊戲內呈現為準。
                    </p>

                    <section class="rules-section">
                        <h4>一、遊戲目標</h4>
                        <ul class="rules-list">
                            <li>時魔：透過收集小時卡與保留齒輪，達成自身勝利條件。</li>
                            <li>時之惡：利用骰子與攻擊規則，逐步削弱其他玩家。</li>
                            <li>受詛者：運用特殊骰子與能力，在混亂中尋找生路。</li>
                        </ul>
                    </section>

                    <section class="rules-section">
                        <h4>二、卡牌種類與資源</h4>
                        <ul class="rules-list">
                            <li><span class="rules-tag">分鐘卡</span>：1–60，決定行動順序與齒輪收益。</li>
                            <li><span class="rules-tag">小時卡</span>：1–12，一般 x2 24 ，x1 珍貴小時卡；共36張。</li>
                            <li><span class="rules-tag">齒輪卡</span>：代表玩家生命，並提供等量 Mana。</li>
                        </ul>
                    </section>

                    <section class="rules-section">
                        <h4>三、基本回合流程（簡表）</h4>
                        <ol class="rules-steps">
                            <li>回合開始：觸發相關角色的回合前能力。</li>
                            <li>揭示兩張小時卡，決定本回合時空環境。</li>
                            <li>所有玩家選擇並打出分鐘卡。</li>
                            <li>依分鐘卡數值，由大到小選取小時卡與站位。</li>
                            <li>結算懲罰、齒輪與 Mana 變化、角色升級。</li>
                            <li>檢查是否有人被逐出或達成勝利條件。</li>
                        </ol>
                        <p class="rules-note">
                            詳細條文（例如「最接近 12 的懲罰」「幼體時魔防禦」等），
                            建議各自獨立成一小節，方便查詢。
                        </p>
                    </section>
                </div>
            </div>

    <div id="settings-content" class="tab-content">
            <h3>⚙️ 設定選項</h3>
            <div class="setting-item">
                <label class="toggle-switch">
                    <input type="checkbox" id="ability-toggle">
                    <span class="slider"></span>
                    <span class="label-text">啟用特殊能力</span>
                </label>
            </div>
			
            <div class="setting-item">
				<div class="setting-title">測試</div>
				<label class="toggle-switch">
				<input type="checkbox" id="test-toggle" />
					<span class="slider"></span>
				</label>
				<div class="setting-hint">
				開啟後：人類玩家在第 1 輪起始手牌固定為 1,2,3,4,5,54,55,56,57,58,59,60。其他角色照常隨機分配（會先從牌庫移除上述卡）。
				</div>
			</div>
			
		<!-- 角色選擇 Overlay -->
		<div id="role-choice-overlay" class="modal-overlay hidden">
			<div class="modal">
			<h2>選擇你的角色</h2>
			<p>開始新遊戲後，請先選擇你要扮演的角色。</p>
				<div class="modal-actions">
				<button id="role-choice-timeDemon" class="primary">時魔</button>
				<button id="role-choice-sin">時之惡</button>
				<button id="role-choice-scz">受詛者</button>
				</div>
			</div>
		</div>
		
           
		<div id="seconds-choice-overlay" class="modal-overlay" style="display:none;">
			<div class="modal">
				<div class="modal-title">秒針能力：二選一</div>
				<div id="seconds-choice-desc" class="modal-desc"></div>
				<div class="modal-actions">
					<button id="seconds-choice-a" type="button"></button>
					<button id="seconds-choice-b" type="button"></button>
				</div>
				<div class="modal-note">未選擇的卡牌會回到你的手牌。</div>
			</div>
		</div>
	</div>
	
	<script src="abilities.js"></script> 
    <script src="game.js"></script>
    <script src="ui.js"></script> 
</body>
</html>